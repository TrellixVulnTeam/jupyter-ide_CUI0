(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[6295],{96295:(e,t,n)=>{"use strict";n.r(t);n.d(t,{Commands:()=>S,default:()=>E,tabSpaceStatus:()=>I});var o=n(20650);var a=n(26825);var r=n(77616);var i=n(49069);var d=n(23668);var c=n(1166);var s=n(64678);var l=n(38961);var u=n(68992);var m=n(10314);var f=n(1612);var g=n(61389);var p=n(83875);var C=n(92481);const v="notebook:toggle-autoclosing-brackets";const b="console:toggle-autoclosing-brackets";var h;(function(e){e.createNew="fileeditor:create-new";e.createNewMarkdown="fileeditor:create-new-markdown-file";e.changeFontSize="fileeditor:change-font-size";e.lineNumbers="fileeditor:toggle-line-numbers";e.lineWrap="fileeditor:toggle-line-wrap";e.changeTabs="fileeditor:change-tabs";e.matchBrackets="fileeditor:toggle-match-brackets";e.autoClosingBrackets="fileeditor:toggle-autoclosing-brackets";e.autoClosingBracketsUniversal="fileeditor:toggle-autoclosing-brackets-universal";e.createConsole="fileeditor:create-console";e.replaceSelection="fileeditor:replace-selection";e.runCode="fileeditor:run-code";e.runAllCode="fileeditor:run-all";e.markdownPreview="fileeditor:markdown-preview";e.undo="fileeditor:undo";e.redo="fileeditor:redo";e.cut="fileeditor:cut";e.copy="fileeditor:copy";e.paste="fileeditor:paste";e.selectAll="fileeditor:select-all"})(h||(h={}));const _="Editor";const k=["autoClosingBrackets","cursorBlinkRate","fontFamily","fontSize","lineHeight","lineNumbers","lineWrap","matchBrackets","readOnly","insertSpaces","tabSize","wordWrapColumn","rulers","codeFolding"];function w(e){const t=Object.assign({},e);for(let n of Object.keys(e)){if(!k.includes(n)){delete e[n]}}return t}let x=w(r.CodeEditor.defaultConfig);var S;(function(e){function t(e){return async function t(n,o){var a;const r=o||{};const i=await e.execute("console:create",{activate:r["activate"],name:(a=n.context.contentsModel)===null||a===void 0?void 0:a.name,path:n.context.path,preferredLanguage:n.context.model.defaultKernelLanguage,ref:n.id,insertMode:"split-bottom"});n.context.pathChanged.connect(((e,t)=>{var o;i.session.setPath(t);i.session.setName((o=n.context.contentsModel)===null||o===void 0?void 0:o.name)}))}}function n(e,t){x=w(Object.assign(Object.assign({},r.CodeEditor.defaultConfig),e.get("editorConfig").composite));t.notifyCommandChanged()}e.updateSettings=n;function o(e){e.forEach((e=>{i(e.content)}))}e.updateTracker=o;function i(e){const t=e.editor;let n={};Object.keys(x).forEach((e=>{n[e]=x[e]}));t.setOptions(n)}e.updateWidget=i;function d(e,t,n,o,a,r,i){c(e,t,n,o);s(e,t,n,o,a);l(e,t,n,o,a);u(e,t,n,o);m(e,t,n,o,a);f(e,t,n,o);g(e,r,n,a);k(e,r,n,a);S(e,r,n,a);y(e,r,n,a);I(e,r,n);O(e,i,n);A(e,i,n);T(e,r,n,a);E(e,r,n,a);M(e,r,n,a);N(e,r,n,a);W(e,r,n,a);B(e,r,n,a)}e.addCommands=d;function c(e,t,n,o){e.addCommand(h.changeFontSize,{execute:e=>{const n=Number(e["delta"]);if(Number.isNaN(n)){console.error(`${h.changeFontSize}: delta arg must be a number`);return}const a=window.getComputedStyle(document.documentElement);const r=parseInt(a.getPropertyValue("--jp-code-font-size"),10);const i=x.fontSize||r;x.fontSize=i+n;return t.set(o,"editorConfig",x).catch((e=>{console.error(`Failed to set ${o}: ${e.message}`)}))},label:e=>{var t;if(((t=e.delta)!==null&&t!==void 0?t:0)>0){return e.isMenu?n.__("Increase Text Editor Font Size"):n.__("Increase Font Size")}else{return e.isMenu?n.__("Decrease Text Editor Font Size"):n.__("Decrease Font Size")}}})}e.addChangeFontSizeCommand=c;function s(e,t,n,o,a){e.addCommand(h.lineNumbers,{execute:()=>{x.lineNumbers=!x.lineNumbers;return t.set(o,"editorConfig",x).catch((e=>{console.error(`Failed to set ${o}: ${e.message}`)}))},isEnabled:a,isToggled:()=>x.lineNumbers,label:n.__("Line Numbers")})}e.addLineNumbersCommand=s;function l(e,t,n,o,a){e.addCommand(h.lineWrap,{execute:e=>{x.lineWrap=e["mode"]||"off";return t.set(o,"editorConfig",x).catch((e=>{console.error(`Failed to set ${o}: ${e.message}`)}))},isEnabled:a,isToggled:e=>{const t=e["mode"]||"off";return x.lineWrap===t},label:n.__("Word Wrap")})}e.addWordWrapCommand=l;function u(e,t,n,o){e.addCommand(h.changeTabs,{label:e=>{var t;if(e.insertSpaces){return n._n("Spaces: %1","Spaces: %1",(t=e.size)!==null&&t!==void 0?t:0)}else{return n.__("Indent with Tab")}},execute:e=>{x.tabSize=e["size"]||4;x.insertSpaces=!!e["insertSpaces"];return t.set(o,"editorConfig",x).catch((e=>{console.error(`Failed to set ${o}: ${e.message}`)}))},isToggled:e=>{const t=!!e["insertSpaces"];const n=e["size"]||4;return x.insertSpaces===t&&x.tabSize===n}})}e.addChangeTabsCommand=u;function m(e,t,n,o,a){e.addCommand(h.matchBrackets,{execute:()=>{x.matchBrackets=!x.matchBrackets;return t.set(o,"editorConfig",x).catch((e=>{console.error(`Failed to set ${o}: ${e.message}`)}))},label:n.__("Match Brackets"),isEnabled:a,isToggled:()=>x.matchBrackets})}e.addMatchBracketsCommand=m;function f(e,t,n,o){e.addCommand(h.autoClosingBrackets,{execute:e=>{var n;x.autoClosingBrackets=!!((n=e["force"])!==null&&n!==void 0?n:!x.autoClosingBrackets);return t.set(o,"editorConfig",x).catch((e=>{console.error(`Failed to set ${o}: ${e.message}`)}))},label:n.__("Auto Close Brackets for Text Editor"),isToggled:()=>x.autoClosingBrackets});e.addCommand(h.autoClosingBracketsUniversal,{execute:()=>{const t=e.isToggled(h.autoClosingBrackets)||e.isToggled(v)||e.isToggled(b);if(t){void e.execute(h.autoClosingBrackets,{force:false});void e.execute(v,{force:false});void e.execute(b,{force:false})}else{void e.execute(h.autoClosingBrackets,{force:true});void e.execute(v,{force:true});void e.execute(b,{force:true})}},label:n.__("Auto Close Brackets"),isToggled:()=>e.isToggled(h.autoClosingBrackets)||e.isToggled(v)||e.isToggled(b)})}e.addAutoClosingBracketsCommand=f;function g(e,t,n,o){e.addCommand(h.replaceSelection,{execute:e=>{var n,o;const a=e["text"]||"";const r=t.currentWidget;if(!r){return}(o=(n=r.content.editor).replaceSelection)===null||o===void 0?void 0:o.call(n,a)},isEnabled:o,label:n.__("Replace Selection in Editor")})}e.addReplaceSelectionCommand=g;function k(e,n,o,a){e.addCommand(h.createConsole,{execute:o=>{const a=n.currentWidget;if(!a){return}return t(e)(a,o)},isEnabled:a,icon:C.consoleIcon,label:o.__("Create Console for Editor")})}e.addCreateConsoleCommand=k;function S(e,t,n,o){e.addCommand(h.runCode,{execute:()=>{var n;const o=(n=t.currentWidget)===null||n===void 0?void 0:n.content;if(!o){return}let a="";const r=o.editor;const i=o.context.path;const d=p.PathExt.extname(i);const c=r.getSelection();const{start:s,end:l}=c;let u=s.column!==l.column||s.line!==l.line;if(u){const e=r.getOffsetAt(c.start);const t=r.getOffsetAt(c.end);a=r.model.value.text.substring(e,t)}else if(p.MarkdownCodeBlocks.isMarkdown(d)){const{text:e}=r.model.value;const t=p.MarkdownCodeBlocks.findMarkdownCodeBlocks(e);for(const n of t){if(n.startLine<=s.line&&s.line<=n.endLine){a=n.code;u=true;break}}}if(!u){a=r.getLine(c.start.line);const e=r.getCursorPosition();if(e.line+1===r.lineCount){const e=r.model.value.text;r.model.value.text=e+"\n"}r.setCursorPosition({line:e.line+1,column:e.column})}const m=false;if(a){return e.execute("console:inject",{activate:m,code:a,path:i})}else{return Promise.resolve(void 0)}},isEnabled:o,label:n.__("Run Code")})}e.addRunCodeCommand=S;function y(e,t,n,o){e.addCommand(h.runAllCode,{execute:()=>{var n;const o=(n=t.currentWidget)===null||n===void 0?void 0:n.content;if(!o){return}let a="";const r=o.editor;const i=r.model.value.text;const d=o.context.path;const c=p.PathExt.extname(d);if(p.MarkdownCodeBlocks.isMarkdown(c)){const e=p.MarkdownCodeBlocks.findMarkdownCodeBlocks(i);for(const t of e){a+=t.code}}else{a=i}const s=false;if(a){return e.execute("console:inject",{activate:s,code:a,path:d})}else{return Promise.resolve(void 0)}},isEnabled:o,label:n.__("Run All Code")})}e.addRunAllCodeCommand=y;function I(e,t,n){e.addCommand(h.markdownPreview,{execute:()=>{const n=t.currentWidget;if(!n){return}const o=n.context.path;return e.execute("markdownviewer:open",{path:o,options:{mode:"split-right"}})},isVisible:()=>{const e=t.currentWidget;return e&&p.PathExt.extname(e.context.path)===".md"||false},icon:C.markdownIcon,label:n.__("Show Markdown Preview")})}e.addMarkdownPreviewCommand=I;function T(e,t,n,o){e.addCommand(h.undo,{execute:()=>{var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return}n.editor.undo()},isEnabled:()=>{var e;if(!o()){return false}const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return false}return true},icon:C.undoIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Undo")})}e.addUndoCommand=T;function E(e,t,n,o){e.addCommand(h.redo,{execute:()=>{var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return}n.editor.redo()},isEnabled:()=>{var e;if(!o()){return false}const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return false}return true},icon:C.redoIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Redo")})}e.addRedoCommand=E;function M(e,t,n,o){e.addCommand(h.cut,{execute:()=>{var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return}const o=n.editor;const r=F(o);a.Clipboard.copyToSystem(r);o.replaceSelection&&o.replaceSelection("")},isEnabled:()=>{var e;if(!o()){return false}const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return false}return P(n.editor)},icon:C.cutIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Cut")})}e.addCutCommand=M;function N(e,t,n,o){e.addCommand(h.copy,{execute:()=>{var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return}const o=n.editor;const r=F(o);a.Clipboard.copyToSystem(r)},isEnabled:()=>{var e;if(!o()){return false}const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return false}return P(n.editor)},icon:C.copyIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Copy")})}e.addCopyCommand=N;function W(e,t,n,o){e.addCommand(h.paste,{execute:async()=>{var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return}const o=n.editor;const a=window.navigator.clipboard;const r=await a.readText();if(r){o.replaceSelection&&o.replaceSelection(r)}},isEnabled:()=>{var e;return Boolean(o()&&((e=t.currentWidget)===null||e===void 0?void 0:e.content))},icon:C.pasteIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Paste")})}e.addPasteCommand=W;function B(e,t,n,o){e.addCommand(h.selectAll,{execute:()=>{var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return}const o=n.editor;o.execCommand("selectAll")},isEnabled:()=>{var e;return Boolean(o()&&((e=t.currentWidget)===null||e===void 0?void 0:e.content))},label:n.__("Select All")})}e.addSelectAllCommand=B;function P(e){const t=e.getSelection();const{start:n,end:o}=t;const a=n.column!==o.column||n.line!==o.line;return a}function F(e){const t=e.getSelection();const n=e.getOffsetAt(t.start);const o=e.getOffsetAt(t.end);const a=e.model.value.text.substring(n,o);return a}function L(e,t,n="txt"){return e.execute("docmanager:new-untitled",{path:t,type:"file",ext:n}).then((t=>{if(t!=undefined){return e.execute("docmanager:open",{path:t.path,factory:_})}}))}function O(e,t,n){e.addCommand(h.createNew,{label:e=>{var t,o;if(e.isPalette){return(t=e.paletteLabel)!==null&&t!==void 0?t:n.__("New Text File")}return(o=e.launcherLabel)!==null&&o!==void 0?o:n.__("Text File")},caption:e=>{var t;return(t=e.caption)!==null&&t!==void 0?t:n.__("Create a new text file")},icon:e=>{var t;return e.isPalette?undefined:C.LabIcon.resolve({icon:(t=e.iconName)!==null&&t!==void 0?t:C.textEditorIcon})},execute:n=>{var o;const a=n.cwd||t.defaultBrowser.model.path;return L(e,a,(o=n.fileExt)!==null&&o!==void 0?o:"txt")}})}e.addCreateNewCommand=O;function A(e,t,n){e.addCommand(h.createNewMarkdown,{label:e=>e["isPalette"]?n.__("New Markdown File"):n.__("Markdown File"),caption:n.__("Create a new markdown file"),icon:e=>e["isPalette"]?undefined:C.markdownIcon,execute:n=>{const o=n["cwd"]||t.defaultBrowser.model.path;return L(e,o,"md")}})}e.addCreateNewMarkdownCommand=A;function R(e,t){z(e,t);j(e,t)}e.addLauncherItems=R;function z(e,t){e.add({command:h.createNew,category:t.__("Other"),rank:1})}e.addCreateNewToLauncher=z;function j(e,t){e.add({command:h.createNewMarkdown,category:t.__("Other"),rank:2})}e.addCreateNewMarkdownToLauncher=j;function $(e,t,n){for(let o of n){e.add({command:h.createNew,category:t.__("Other"),rank:3,args:o})}}e.addKernelLanguageLauncherItems=$;function K(e,t){U(e,t);V(e,t);D(e,t);J(e,t)}e.addPaletteItems=K;function U(e,t){const n=t.__("Text Editor");const o={insertSpaces:false,size:4};const a=h.changeTabs;e.addItem({command:a,args:o,category:n});for(const r of[1,2,4,8]){const t={insertSpaces:true,size:r};e.addItem({command:a,args:t,category:n})}}e.addChangeTabsCommandsToPalette=U;function V(e,t){const n=t.__("Text Editor");e.addItem({command:h.createNew,args:{isPalette:true},category:n})}e.addCreateNewCommandToPalette=V;function D(e,t){const n=t.__("Text Editor");e.addItem({command:h.createNewMarkdown,args:{isPalette:true},category:n})}e.addCreateNewMarkdownCommandToPalette=D;function J(e,t){const n=t.__("Text Editor");const o=h.changeFontSize;let a={delta:1};e.addItem({command:o,args:a,category:n});a={delta:-1};e.addItem({command:o,args:a,category:n})}e.addChangeFontSizeCommandsToPalette=J;function q(e,t,n){const o=t.__("Text Editor");for(let a of n){e.addItem({command:h.createNew,args:Object.assign(Object.assign({},a),{isPalette:true}),category:o})}}e.addKernelLanguagePaletteItems=q;function H(e,t,n,o,a,r){Q(e,n);X(e,n);Y(e,t,n,o);if(a){Z(e,t,n,a,o,r)}}e.addMenuItems=H;function G(e,t){for(let n of t){e.fileMenu.newMenu.addItem({command:h.createNew,args:n,rank:30})}}e.addKernelLanguageMenuItems=G;function Q(e,t){e.editMenu.undoers.add({tracker:t,undo:e=>{e.content.editor.undo()},redo:e=>{e.content.editor.redo()}})}e.addUndoRedoToEditMenu=Q;function X(e,t){e.viewMenu.editorViewers.add({tracker:t,toggleLineNumbers:e=>{const t=!e.content.editor.getOption("lineNumbers");e.content.editor.setOption("lineNumbers",t)},toggleWordWrap:e=>{const t=e.content.editor.getOption("lineWrap");const n=t==="off"?"on":"off";e.content.editor.setOption("lineWrap",n)},toggleMatchBrackets:e=>{const t=!e.content.editor.getOption("matchBrackets");e.content.editor.setOption("matchBrackets",t)},lineNumbersToggled:e=>e.content.editor.getOption("lineNumbers"),wordWrapToggled:e=>e.content.editor.getOption("lineWrap")!=="off",matchBracketsToggled:e=>e.content.editor.getOption("matchBrackets")})}e.addEditorViewerToViewMenu=X;function Y(e,n,o,a){const r=t(n);e.fileMenu.consoleCreators.add({tracker:o,createConsoleLabel:e=>a.__("Create Console for Editor"),createConsole:r})}e.addConsoleCreatorToFileMenu=Y;function Z(e,t,n,o,r,i){e.runMenu.codeRunners.add({tracker:n,runLabel:e=>r.__("Run Code"),runAllLabel:e=>r.__("Run All Code"),restartAndRunAllLabel:e=>r.__("Restart Kernel and Run All Code"),isEnabled:e=>!!o.find((t=>{var n;return((n=t.sessionContext.session)===null||n===void 0?void 0:n.path)===e.context.path})),run:()=>t.execute(h.runCode),runAll:()=>t.execute(h.runAllCode),restartAndRunAll:e=>{const n=o.find((t=>{var n;return((n=t.sessionContext.session)===null||n===void 0?void 0:n.path)===e.context.path}));if(n){return(i||a.sessionContextDialogs).restart(n.sessionContext).then((e=>{if(e){void t.execute(h.runAllCode)}return e}))}}})}e.addCodeRunnersToRunMenu=Z})(S||(S={}));const y={activate:M,id:"@jupyterlab/fileeditor-extension:plugin",requires:[r.IEditorServices,d.IFileBrowserFactory,u.ISettingRegistry,f.ITranslator],optional:[i.IConsoleTracker,a.ICommandPalette,s.ILauncher,l.IMainMenu,o.ILayoutRestorer,a.ISessionContextDialogs],provides:c.IEditorTracker,autoStart:true};const I={id:"@jupyterlab/fileeditor-extension:tab-space-status",autoStart:true,requires:[c.IEditorTracker,u.ISettingRegistry,f.ITranslator],optional:[m.IStatusBar],activate:(e,t,n,o,a)=>{const i=o.load("jupyterlab");if(!a){return}const d=new g.Menu({commands:e.commands});const s="fileeditor:change-tabs";const{shell:l}=e;const u={insertSpaces:false,size:4,name:i.__("Indent with Tab")};d.addItem({command:s,args:u});for(const r of[1,2,4,8]){const e={insertSpaces:true,size:r,name:i._n("Spaces: %1","Spaces: %1",r)};d.addItem({command:s,args:e})}const m=new c.TabSpaceStatus({menu:d,translator:o});const f=e=>{m.model.config=Object.assign(Object.assign({},r.CodeEditor.defaultConfig),e.get("editorConfig").composite)};void Promise.all([n.load("@jupyterlab/fileeditor-extension:plugin"),e.restored]).then((([e])=>{f(e);e.changed.connect(f)}));a.registerStatusItem("@jupyterlab/fileeditor-extension:tab-space-status",{item:m,align:"right",rank:1,isActive:()=>!!l.currentWidget&&t.has(l.currentWidget)})}};const T=[y,I];const E=T;function M(e,t,n,o,r,i,d,s,l,u,m){const f=y.id;const g=r.load("jupyterlab");const p="editor";const C=new c.FileEditorFactory({editorServices:t,factoryOptions:{name:_,fileTypes:["markdown","*"],defaultFor:["markdown","*"]}});const{commands:v,restored:b,shell:h}=e;const k=new a.WidgetTracker({namespace:p});const w=()=>k.currentWidget!==null&&k.currentWidget===h.currentWidget;const x=new Map([["python",[{fileExt:"py",iconName:"ui-components:python",launcherLabel:g.__("Python File"),paletteLabel:g.__("New Python File"),caption:g.__("Create a new Python file")}]],["julia",[{fileExt:"jl",iconName:"ui-components:julia",launcherLabel:g.__("Julia File"),paletteLabel:g.__("New Julia File"),caption:g.__("Create a new Julia file")}]],["R",[{fileExt:"r",iconName:"ui-components:r-kernel",launcherLabel:g.__("R File"),paletteLabel:g.__("New R File"),caption:g.__("Create a new R file")}]]]);const I=async()=>{var t,n;const o=e.serviceManager.kernelspecs;await o.ready;let a=new Set;const r=(n=(t=o.specs)===null||t===void 0?void 0:t.kernelspecs)!==null&&n!==void 0?n:{};Object.keys(r).forEach((e=>{const t=r[e];if(t){const e=x.get(t.language);e===null||e===void 0?void 0:e.forEach((e=>a.add(e)))}}));return a};if(u){void u.restore(k,{command:"docmanager:open",args:e=>({path:e.context.path,factory:_}),name:e=>e.context.path})}Promise.all([o.load(f),b]).then((([e])=>{S.updateSettings(e,v);S.updateTracker(k);e.changed.connect((()=>{S.updateSettings(e,v);S.updateTracker(k)}))})).catch((e=>{console.error(e.message);S.updateTracker(k)}));C.widgetCreated.connect(((e,t)=>{t.context.pathChanged.connect((()=>{void k.save(t)}));void k.add(t);S.updateWidget(t.content)}));e.docRegistry.addWidgetFactory(C);k.widgetAdded.connect(((e,t)=>{S.updateWidget(t.content)}));S.addCommands(v,o,g,f,w,k,n);if(s){S.addLauncherItems(s,g)}if(d){S.addPaletteItems(d,g)}if(l){S.addMenuItems(l,v,k,g,i,m)}I().then((e=>{if(s){S.addKernelLanguageLauncherItems(s,g,e)}if(d){S.addKernelLanguagePaletteItems(d,g,e)}if(l){S.addKernelLanguageMenuItems(l,e)}})).catch((e=>{console.error(e.message)}));return k}}}]);