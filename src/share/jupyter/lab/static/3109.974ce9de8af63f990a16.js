(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[3109],{3109:(e,n,t)=>{"use strict";t.r(n);t.d(n,{default:()=>A});var a=t(20650);var o=t.n(a);var r=t(26825);var i=t.n(r);var s=t(77616);var c=t.n(s);var d=t(78775);var l=t.n(d);var u=t(49069);var g=t.n(u);var v=t(83875);var b=t.n(v);var p=t(74053);var m=t.n(p);var h=t(56052);var f=t.n(h);var C=t(1166);var I=t.n(C);var y=t(68269);var D=t.n(y);var w=t(3860);var _=t.n(w);var S=t(72805);var k=t.n(S);var x=t(68992);var T=t.n(x);var E=t(1612);var j=t.n(E);const O={id:"@jupyterlab/debugger-extension:consoles",autoStart:true,requires:[p.IDebugger,u.IConsoleTracker],optional:[a.ILabShell],activate:(e,n,t,a)=>{const o=new p.Debugger.Handler({type:"console",shell:e.shell,service:n});const r=async n=>{const{sessionContext:t}=n;await t.ready;await o.updateContext(n,t);e.commands.notifyCommandChanged()};if(a){a.currentChanged.connect((async(e,n)=>{const t=n.newValue;if(!(t instanceof u.ConsolePanel)){return}await r(t)}));return}t.currentChanged.connect((async(e,n)=>{if(n){void r(n)}}))}};const L={id:"@jupyterlab/debugger-extension:files",autoStart:true,requires:[p.IDebugger,C.IEditorTracker],optional:[a.ILabShell],activate:(e,n,t,a)=>{const o=new p.Debugger.Handler({type:"file",shell:e.shell,service:n});const r={};const i=async n=>{const t=e.serviceManager.sessions;try{const a=await t.findByPath(n.context.path);if(!a){return}let i=r[a.id];if(!i){i=t.connectTo({model:a});r[a.id]=i}await o.update(n,i);e.commands.notifyCommandChanged()}catch(a){return}};if(a){a.currentChanged.connect((async(e,n)=>{const t=n.newValue;if(!(t instanceof h.DocumentWidget)){return}const a=t.content;if(!(a instanceof C.FileEditor)){return}await i(t)}))}t.currentChanged.connect((async(e,n)=>{await i(n)}))}};const M={id:"@jupyterlab/debugger-extension:notebooks",autoStart:true,requires:[p.IDebugger,w.INotebookTracker,E.ITranslator],optional:[a.ILabShell,r.ICommandPalette],activate:(e,n,t,a,o,i)=>{const s=new p.Debugger.Handler({type:"notebook",shell:e.shell,service:n});const c=a.load("jupyterlab");e.commands.addCommand(p.Debugger.CommandIDs.restartDebug,{label:c.__("Restart Kernel and Debug…"),caption:c.__("Restart Kernel and Debug…"),isEnabled:()=>n.isStarted,execute:async()=>{const e=n.getDebuggerState();console.log(e.cells);const{context:a,content:o}=t.currentWidget;await n.stop();const i=await r.sessionContextDialogs.restart(a.sessionContext);if(i){await n.restoreDebuggerState(e);await s.updateWidget(t.currentWidget,t.currentWidget.sessionContext.session);await w.NotebookActions.runAll(o,a.sessionContext)}}});const d=async n=>{const{sessionContext:t}=n;await t.ready;await s.updateContext(n,t);e.commands.notifyCommandChanged()};if(o){o.currentChanged.connect((async(e,n)=>{const t=n.newValue;if(!(t instanceof w.NotebookPanel)){return}await d(t)}));return}if(i){i.addItem({category:"Notebook Operations",command:p.Debugger.CommandIDs.restartDebug})}t.currentChanged.connect((async(e,n)=>{await d(n)}))}};const R={id:"@jupyterlab/debugger-extension:service",autoStart:true,provides:p.IDebugger,requires:[p.IDebuggerConfig],optional:[p.IDebuggerSources],activate:(e,n,t)=>new p.Debugger.Service({config:n,debuggerSources:t,specsManager:e.serviceManager.kernelspecs})};const V={id:"@jupyterlab/debugger-extension:config",provides:p.IDebuggerConfig,autoStart:true,activate:()=>new p.Debugger.Config};const q={id:"@jupyterlab/debugger-extension:sources",autoStart:true,provides:p.IDebuggerSources,requires:[p.IDebuggerConfig,s.IEditorServices],optional:[w.INotebookTracker,u.IConsoleTracker,C.IEditorTracker],activate:(e,n,t,a,o,r)=>new p.Debugger.Sources({config:n,shell:e.shell,editorServices:t,notebookTracker:a,consoleTracker:o,editorTracker:r})};const W={id:"@jupyterlab/debugger-extension:variables",autoStart:true,requires:[p.IDebugger,E.ITranslator],optional:[r.IThemeManager],activate:(e,n,t,a)=>{const o=t.load("jupyterlab");const{commands:i,shell:s}=e;const c=new r.WidgetTracker({namespace:"debugger/inspect-variable"});const d=p.Debugger.CommandIDs;i.addCommand(d.inspectVariable,{label:o.__("Inspect Variable"),caption:o.__("Inspect Variable"),execute:async e=>{var t,o;const{variableReference:d}=e;if(!d||d===0){return}const l=await n.inspectVariable(d);const u=e.title;const g=`jp-debugger-variable-${u}`;if(!l||l.length===0||c.find((e=>e.id===g))){return}const v=n.model.variables;const b=new r.MainAreaWidget({content:new p.Debugger.VariablesGrid({model:v,commands:i,scopes:[{name:u,variables:l}],themeManager:a})});b.addClass("jp-DebuggerVariables");b.id=g;b.title.icon=p.Debugger.Icons.variableIcon;b.title.label=`${(o=(t=n.session)===null||t===void 0?void 0:t.connection)===null||o===void 0?void 0:o.name} - ${u}`;void c.add(b);v.changed.connect((()=>b.dispose()));s.add(b,"main",{mode:c.currentWidget?"split-right":"split-bottom"})}})}};const N={id:"@jupyterlab/debugger-extension:sidebar",provides:p.IDebuggerSidebar,requires:[p.IDebugger,s.IEditorServices,E.ITranslator],optional:[r.IThemeManager,x.ISettingRegistry],autoStart:true,activate:async(e,n,t,a,o,r)=>{const{commands:i}=e;const s=p.Debugger.CommandIDs;const c={registry:i,continue:s.debugContinue,terminate:s.terminate,next:s.next,stepIn:s.stepIn,stepOut:s.stepOut,evaluate:s.evaluate};const d=new p.Debugger.Sidebar({service:n,callstackCommands:c,editorServices:t,themeManager:o,translator:a});if(r){const e=await r.load(P.id);const t=()=>{var t,a,o,r;const i=e.get("variableFilters").composite;const s=(r=(o=(a=(t=n.session)===null||t===void 0?void 0:t.connection)===null||a===void 0?void 0:a.kernel)===null||o===void 0?void 0:o.name)!==null&&r!==void 0?r:"";if(s&&i[s]){d.variables.filter=new Set(i[s])}};t();e.changed.connect(t);n.sessionChanged.connect(t)}return d}};const P={id:"@jupyterlab/debugger-extension:main",requires:[p.IDebugger,p.IDebuggerSidebar,s.IEditorServices,E.ITranslator],optional:[r.ICommandPalette,p.IDebuggerSources,a.ILabShell,a.ILayoutRestorer,y.ILoggerRegistry],autoStart:true,activate:async(e,n,t,a,o,r,i,s,c,l)=>{var u;const g=o.load("jupyterlab");const{commands:b,shell:m,serviceManager:h}=e;const{kernelspecs:f}=h;const C=p.Debugger.CommandIDs;const I=v.PageConfig.getOption("alwaysShowDebuggerExtension").toLowerCase()==="true";if(!I){await f.ready;const e=(u=f.specs)===null||u===void 0?void 0:u.kernelspecs;if(!e){return}const n=Object.keys(e).some((n=>{var t,a,o;return!!((o=(a=(t=e[n])===null||t===void 0?void 0:t.metadata)===null||a===void 0?void 0:a["debugger"])!==null&&o!==void 0?o:false)}));if(!n){return}}const y=async()=>{var e,t,o;const r=(t=(e=n.session)===null||e===void 0?void 0:e.connection)===null||t===void 0?void 0:t.kernel;if(!r){return""}const i=(await r.info).language_info;const s=i.name;const c=(o=a===null||a===void 0?void 0:a.mimeTypeService.getMimeTypeByLanguage({name:s}))!==null&&o!==void 0?o:"";return c};const D=new S.RenderMimeRegistry({initialFactories:S.standardRendererFactories});b.addCommand(C.evaluate,{label:g.__("Evaluate Code"),caption:g.__("Evaluate Code"),icon:p.Debugger.Icons.evaluateIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{var e,t,a;const o=await y();const r=await p.Debugger.Dialogs.getCode({title:g.__("Evaluate Code"),okLabel:g.__("Evaluate"),cancelLabel:g.__("Cancel"),mimeType:o,rendermime:D});const i=r.value;if(!r.button.accept||!i){return}const s=await n.evaluate(i);if(s){const o=s.result;const r=(t=(e=n===null||n===void 0?void 0:n.session)===null||e===void 0?void 0:e.connection)===null||t===void 0?void 0:t.path;const i=r?(a=l===null||l===void 0?void 0:l.getLogger)===null||a===void 0?void 0:a.call(l,r):undefined;if(i){i.log({type:"text",data:o,level:i.level})}else{console.debug(o)}}}});b.addCommand(C.debugContinue,{label:g.__("Continue"),caption:g.__("Continue"),icon:p.Debugger.Icons.continueIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.continue();b.notifyCommandChanged()}});b.addCommand(C.terminate,{label:g.__("Terminate"),caption:g.__("Terminate"),icon:p.Debugger.Icons.terminateIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.restart();b.notifyCommandChanged()}});b.addCommand(C.next,{label:g.__("Next"),caption:g.__("Next"),icon:p.Debugger.Icons.stepOverIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.next()}});b.addCommand(C.stepIn,{label:g.__("Step In"),caption:g.__("Step In"),icon:p.Debugger.Icons.stepIntoIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.stepIn()}});b.addCommand(C.stepOut,{label:g.__("Step Out"),caption:g.__("Step Out"),icon:p.Debugger.Icons.stepOutIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.stepOut()}});n.eventMessage.connect(((e,n)=>{b.notifyCommandChanged();if(s&&n.event==="initialized"){s.activateById(t.id)}}));n.sessionChanged.connect((e=>{b.notifyCommandChanged()}));if(c){c.add(t,"debugger-sidebar")}t.node.setAttribute("role","region");t.node.setAttribute("aria-label",g.__("Debugger section"));m.add(t,"right");if(r){const e=g.__("Debugger");[C.debugContinue,C.terminate,C.next,C.stepIn,C.stepOut,C.evaluate].forEach((n=>{r.addItem({command:n,category:e})}))}if(i){const{model:e}=n;const t=new p.Debugger.ReadOnlyEditorFactory({editorServices:a});const o=(e,t)=>{var a,o,r,s,c,d,l,u,g;i.find({focus:true,kernel:(s=(r=(o=(a=n.session)===null||a===void 0?void 0:a.connection)===null||o===void 0?void 0:o.kernel)===null||r===void 0?void 0:r.name)!==null&&s!==void 0?s:"",path:(l=(d=(c=n.session)===null||c===void 0?void 0:c.connection)===null||d===void 0?void 0:d.path)!==null&&l!==void 0?l:"",source:(g=(u=t===null||t===void 0?void 0:t.source)===null||u===void 0?void 0:u.path)!==null&&g!==void 0?g:""}).forEach((e=>{requestAnimationFrame((()=>{p.Debugger.EditorHandler.showCurrentLine(e,t.line)}))}))};const r=(e,a,o)=>{var r,s,c,l,u,g,b;if(!a){return}const{content:m,mimeType:h,path:f}=a;const C=i.find({focus:true,kernel:(l=(c=(s=(r=n.session)===null||r===void 0?void 0:r.connection)===null||s===void 0?void 0:s.kernel)===null||c===void 0?void 0:c.name)!==null&&l!==void 0?l:"",path:(b=(g=(u=n.session)===null||u===void 0?void 0:u.connection)===null||g===void 0?void 0:g.path)!==null&&b!==void 0?b:"",source:f});if(C.length>0){if(o&&typeof o.line!=="undefined"){C.forEach((e=>{if(e instanceof d.CodeMirrorEditor){e.scrollIntoViewCentered({line:o.line-1,ch:o.column||0})}else{e.revealPosition({line:o.line-1,column:o.column||0})}}))}return}const I=t.createNewEditor({content:m,mimeType:h,path:f});const y=I.editor;const D=new p.Debugger.EditorHandler({debuggerService:n,editor:y,path:f});I.disposed.connect((()=>D.dispose()));i.open({label:v.PathExt.basename(f),caption:f,editorWrapper:I});const w=n.model.callstack.frame;if(w){p.Debugger.EditorHandler.showCurrentLine(y,w.line)}};e.callstack.currentFrameChanged.connect(o);e.sources.currentSourceOpened.connect(r);e.breakpoints.clicked.connect((async(e,t)=>{var a;const o=(a=t.source)===null||a===void 0?void 0:a.path;const i=await n.getSource({sourceReference:0,path:o});r(null,i,t)}))}}};const F=[R,O,L,M,W,N,P,q,V];const A=F}}]);